#
# SAPPLY FUNCTION
# DEFINITON:  A user-friendly version and wrapper of lapply
# FORMAT:     There are numerous formats, check examples
#
# EXAMPLE DATA (SunGlasses Sales)
glasses <- list(Model1=rbind(Shop=(c("Spring"=c(51),"Summer"=c(65),"Autumn & Winter"=c(19))),
Online=(c("Spring"=c(59),"Summer"=c(85),"Autumn & Winter"=c(14)))),
Model2=rbind(Shop=(c("Spring"=c(64),"Summer"=c(73),"Autumn & Winter"=c(11))),
Online=(c("Spring"=c(72),"Summer"=c(91),"Autumn & Winter"=c(13))))
)
#
# Sale Diffences between Shop and Online
lapply(glasses, function(z) abs(z[1,]-z[2,]))
sapply(glasses, function(z) abs(z[1,]-z[2,])) #Much prettier!
#
# NESTING APPLY FUNCTIONS
Model1
#
# NESTING APPLY FUNCTIONS
glasses$Model1
#
# NESTING APPLY FUNCTIONS
apply(glasses$Model1, 1, max)
#
# NESTING APPLY FUNCTIONS
apply(glasses, 1, max)
apply(glasses, 1, max)          #max can NOT be applied on a list (glasses)!!!
lapply(glases, apply(glasses, 1, max))
lapply(glases, apply, 1, max)
lapply(glasses, apply, 1, max)
sapply(glasses, apply, 1, max)  #max of the every single row in the list
#
# VERY ADVANCED !!!
sapply(glasses, apply, 1, max)
sapply(glasses, apply, 1, min)
#
glasses$Model1
#
which.max(glasses$Model1[1,])
#
which.max(glasses$Model1[1,]) #gives the col name of the max value and the index of it!
#
which.max(glasses$Model2[1,]) #gives the COL NAME and COL NUMBER of the MAX VALUE!
#
# SAPPLY FUNCTION
# DEFINITON:  A user-friendly version and wrapper of lapply
# FORMAT:     There are numerous formats, check examples
#
# EXAMPLE DATA (SunGlasses Sales)
glasses <- list(Model1=rbind(Shop=(c("Spring"=c(51),"Summer"=c(95),"Autumn & Winter"=c(19))),
Online=(c("Spring"=c(59),"Summer"=c(85),"Autumn & Winter"=c(14)))),
Model2=rbind(Shop=(c("Spring"=c(64),"Summer"=c(73),"Autumn & Winter"=c(11))),
Online=(c("Spring"=c(72),"Summer"=c(91),"Autumn & Winter"=c(13))))
)
#
which.max(glasses$Model2[1,]) #gives the COL NAME and COL NUMBER of the MAX VALUE!
#
# SAPPLY FUNCTION
# DEFINITON:  A user-friendly version and wrapper of lapply
# FORMAT:     There are numerous formats, check examples
#
# EXAMPLE DATA (SunGlasses Sales)
glasses <- list(Model1=rbind(Shop=(c("Spring"=c(51),"Summer"=c(75),"Autumn & Winter"=c(19))),
Online=(c("Spring"=c(59),"Summer"=c(85),"Autumn & Winter"=c(14)))),
Model2=rbind(Shop=(c("Spring"=c(64),"Summer"=c(73),"Autumn & Winter"=c(11))),
Online=(c("Spring"=c(72),"Summer"=c(91),"Autumn & Winter"=c(13))))
)
#
which.max(glasses$Model2[1,]) #gives the COL NAME and COL NUMBER of the MAX VALUE!
#
#EXAMPLE
which.max(glasses$Model1[1,]) #gives the COL NAME and the COL NUMBER of the MAX VALUE!
names(which.max(glasses$Model1[1,])) #gives the COL NAME and the COL NUMBER of the MAX VALUE!
#
apply(glasses$Model1, 1, function(x) names(which.max(x)))
#
# SAPPLY FUNCTION
# DEFINITON:  A user-friendly version and wrapper of lapply
# FORMAT:     There are numerous formats, check examples
#
# EXAMPLE DATA (SunGlasses Sales)
glasses <- list(Model1=rbind(Shop=(c("Spring"=c(51),"Summer"=c(75),"Autumn & Winter"=c(19))),
Online=(c("Spring"=c(59),"Summer"=c(85),"Autumn & Winter"=c(14)))),
Model2=rbind(Shop=(c("Spring"=c(64),"Summer"=c(73),"Autumn & Winter"=c(11))),
Online=(c("Spring"=c(92),"Summer"=c(91),"Autumn & Winter"=c(13))))
)
#
# SAPPLY FUNCTION
# DEFINITON:  A user-friendly version and wrapper of lapply
# FORMAT:     There are numerous formats, check examples
#
# EXAMPLE DATA (SunGlasses Sales)
glasses <- list(Model1=rbind(Shop=(c("Spring"=c(31),"Summer"=c(75),"Autumn & Winter"=c(33))),
Online=(c("Spring"=c(69),"Summer"=c(85),"Autumn & Winter"=c(14)))),
Model2=rbind(Shop=(c("Spring"=c(64),"Summer"=c(73),"Autumn & Winter"=c(11))),
Online=(c("Spring"=c(92),"Summer"=c(91),"Autumn & Winter"=c(13))))
)
names(which.max(glasses$Model1[1,]))  #gives the COL NAME of the MAX VALUE!
#
apply(glasses$Model1, 1, function(x) names(which.max(x)))
apply(glasses$Model2, 1, function(x) names(which.max(x)))
apply(glasses$Model2, 1, function(x) names(which.max(x))) #gives COL NAMEs of the max values in the rows
lapply(glasses, function(y) apply(y, 1, function(x) names(which.max(x)))) #gives COL NAMEs of the max values in the rows (All!)
sapply(glasses, function(y) apply(y, 1, function(x) names(which.max(x)))) #gives COL NAMEs of the max values in the rows (All!)
# F5-APPLY FUNCTIONS
########################################
# APPLY FUNCTION
# DEFINITON:  Works as a single line loops
# FORMAT:     There are numerous formats, check examples
#
# EXAMPLE (Mean Calculation)
?apply
# F3-REPLACING MISISNG DATA: FACTUAL ANALYSIS METHOD
########################################
# FORMAT: mydata[is.na(mydata$country) & mydata$city=="Boston","country"] <- "USA" (city and country are the example cols)
# EXAMPLE
#
# DATA IMPORT & CHECKS
setwd("/Users/ugur/Desktop/R/_data/r_advanced/")
fin <- read.csv("future_500.csv")
fin <- read.csv("future_500.csv",na.strings=c(""))  #to replace empty chars with NA
fin[is.na(fin$State),]                              #checking 'NA's in State col.
# CASE1: Filling NA states with NY (while city is New York)
fin[is.na(fin$State) & fin$City=="New York",]       #show the rows that State=NA & City=New York
# CASE1: Filling NA states with NY (while city is New York)
assign1 <- fin[is.na(fin$State) & fin$City=="New York",]       #show the rows that State=NA & City=New York
assign1[1]
fin[is.na(fin$State) & fin$City=="New York","State"] <- "NY"  #to assign "NY" to the states (State=NA & City=New York)
fin[c(11,379),]
fin <- read.csv("future_500.csv")
fin <- read.csv("future_500.csv",na.strings=c(""))  #to replace empty chars with NA
fin[!complete.cases(fin),]                          #to get cols. that have missing values
fin[is.na(fin$State),]                              #checking 'NA's in State col.
# CASE1: Filling NA states with NY (while city is New York)
fin[is.na(fin$State) & fin$City=="New York",]                 #shows the rows that State=NA & City=New York
fin[is.na(fin$State) & fin$City=="New York","State"] <- "NY"  #to assign "NY" to the states (State=NA & City=New York)
fin[c(11,379),]   #check
fin <- read.csv("future_500.csv")
fin <- read.csv("future_500.csv",na.strings=c(""))  #to replace empty chars with NA
# CASE1: Filling NA states with NY (while city is New York)
fin[c(11,379,84,267),]  #check the states
# CASE1: Filling NA states with NY (while city is New York)
fin$State[c(11,379,84,267),]  #check the states
# CASE1: Filling NA states with NY (while city is New York)
fin$State[c(11,379,84,267)]  #check the states
# CASE1: Filling NA states with NY (while city is New York)
fin$State[r(11,379,84,267)]  #check the states
# CASE1: Filling NA states with NY (while city is New York)
fin$State[11,379,84,267]  #check the states
# CASE1: Filling NA states with NY (while city is New York)
fin$State[c(11,379,84,267)]  #check the states
# CASE1: Filling NA states with NY (while city is New York)
fin$State
# CASE1: Filling NA states with NY (while city is New York)
fin$State[1]
# CASE1: Filling NA states with NY (while city is New York)
fin$State[1,2]
# CASE1: Filling NA states with NY (while city is New York)
fin$State[1 2]
# CASE1: Filling NA states with NY (while city is New York)
fin$State[c(1,2)]
# CASE1: Filling NA states with NY (while city is New York)
fin$State[c(11,379,84,267)]  #check the states
fin[c(11,379,84,267),]      #check the states again
fin$State[c(11,379,84,267),]      #check the states again
fin$State[c(11,379,84,267)]      #check the states again
fin[is.na(fin$State) & fin$City=="New York",]                     #show the rows that State=NA & City=New York
fin[is.na(fin$State) & fin$City=="New York","State"] <-"NY"       #to assign "NY" to the states (State=NA & City=New York)
fin$State[c(11,379,84,267)]      #check the states again
fin[is.na(fin$State) & fin$City=="San Francisco",]                #show the rows that State=NA & City=San Francisco
fin[is.na(fin$State) & fin$City=="San Francisco","State"] <-"CA"  #to assign "CA" to the states (State=NA & City=San Francisco)
fin$State[c(11,379,84,267)]      #check the states again
#
# EXAMPLE2: Filling NA states with CA (while city is San Francisco)
fin[c(84,267),]
# THE CASE
# In fin data some of the "Employees" are missing
# Missing values can be filled with average/median of the relevant column
# Taking average/median not for all rows but only related rows is logical
fin[complete.cases(fin),]   #complete values in fin data
fin[!complete.cases(fin),]  #not-complete values in fin data
# Median & Mean for Employees col. when Industry=Retail
median(fin[fin$Industry=="Retail","Employees"], na.rm=TRUE)   #NAs are removed
# THE CASE
# In fin data some of the "Employees" are missing
# Missing values can be filled with average/median of the relevant column
# Taking average/median not for all rows but only related rows is logical
#
# EXAMPLE1: Median & Mean Changes in "Retail"
#
# Median & Mean for Employees col.
median(fin[,"Employees"], na.rm=TRUE)                         #NAs are removed
mean(fin[,"Employees"], na.rm=TRUE)                           #NAs are removed
# Median & Mean for Employees col. when Industry=Retail
median(fin[fin$Industry=="Retail","Employees"], na.rm=TRUE)   #NAs are removed
mean(fin[fin$Industry=="Retail","Employees"], na.rm=TRUE)     #NAs are removed
# Check that the median and mean values are very different!
#
med_empl_retail <- median(fin[fin$Industry=="Retail","Employees"], na.rm=T)
fin[is.na(fin$Employees) & fin$Industry=="Retail","Employees"] <- med_empl_retail
#
# EXAMPLE2: Median & Mean Changes in "Financial Services"
mean(fin[,"Employees"], na.rm=TRUE)
# THE CASE
# In fin data some of the "Employees" are missing
# Missing values can be filled with average/median of the relevant column
# Taking average/median not for all rows but only related rows is logical
#
# EXAMPLE1: Median & Mean Changes in "Retail"
#
# Median & Mean for Employees col.
median(fin[,"Employees"], na.rm=TRUE)                         #na.rm=T for NA removal
#
# EXAMPLE2: Median & Mean Changes in "Financial Services"
median(fin[,"Employees"], na.rm=TRUE)
# THE CASE
# In fin data some of the "Employees" are missing
# Missing values can be filled with average/median of the relevant column
# Taking average/median not for all rows but only related rows is logical
#
# EXAMPLE1: Filling Median in "Retail"
#
# Median & Mean for Employees col.
median(fin[,"Employees"], na.rm=TRUE)                         #na.rm=T for NA removal
mean(fin[,"Employees"], na.rm=TRUE)
# THE CASE
# In fin data some of the "Employees" are missing
# Missing values can be filled with average/median of the relevant column
# Taking average/median not for all rows but only related rows is logical
#
# EXAMPLE1: Filling NA cells with Median in "Retail"
med_empl_retail <- median(fin[fin$Industry=="Retail","Employees"], na.rm=T)
med_empl_retail -> fin[is.na(fin$Employees) & fin$Industry=="Retail","Employees"]
fin[3,] #check the missing employee value becomes 28
fin[!complete.cases(fin),]  #not-complete values in fin data
fin <- read.csv("future_500.csv")
fin <- read.csv("future_500.csv",na.strings=c(""))  #to replace empty chars with NA
fin[!complete.cases(fin),]  #not-complete values in fin data
fin[!complete.cases(fin$Employees),]                #not-complete "Employees" values in fin data
# THE CASE
# In fin data some of the "Employees" are missing
# Missing values can be filled with average/median of the relevant column
# Taking average/median not for all rows but only related rows is logical
#
fin[!complete.cases(fin$Employees),]  #not-complete "Employees" values in fin data (3,28)
#
# EXAMPLE2: Filling NA cells with Median in Financial Services"
med_empl_finserv <- median(fin[fin$Industry=="Financial Services","Employees"], na.rm=T)
med_empl_finserv -> fin[is.na(fin$Employees) & fin$Industry=="Financial Services","Employees"]
fin[332,] #check the missing employee value becomes 28
#
# MEDIAN IMPUTATION METHOD-2
# THE CASE
# In fin data some of the "Growth" cells are missing
fin[!complete.cases(fin$Growth),]  #not-complete "Growth" values in fin data (3,332)
med_growth_constr <- median(fin[fin$Industry=="Construciton","Growth"], na.rm=T)  #med calculation
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)  #med calculation
#
# MEDIAN IMPUTATION METHOD-2
# THE CASE
# In fin data some of the "Growth" cells are missing
fin[!complete.cases(fin$Growth),]  #not-complete "Growth" values in fin data (8)
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)  #med calculation
fin <- read.csv("future_500.csv")
fin <- read.csv("future_500.csv",na.strings=c(""))  #to replace empty chars with NA
# THE CASE
# In fin data some of the "Employees" cells are missing
# Missing values can be filled with average/median of the relevant column
# Taking average/median not for all rows but only related rows is logical
#
fin[!complete.cases(fin$Employees),]  #not-complete "Employees" values in fin data (3,332)
#
# EXAMPLE1: Filling NA cells with Median in "Retail"
med_empl_retail <- median(fin[fin$Industry=="Retail","Employees"], na.rm=T)                     #med calculation
med_empl_retail -> fin[is.na(fin$Employees) & fin$Industry=="Retail","Employees"]               #assign the med
fin[3,] #check the missing employee value becomes 28
#
# EXAMPLE2: Filling NA cells with Median in Financial Services"
med_empl_finserv <- median(fin[fin$Industry=="Financial Services","Employees"], na.rm=T)        #med calculation
med_empl_finserv -> fin[is.na(fin$Employees) & fin$Industry=="Financial Services","Employees"]  #assign the med
fin[332,] #check the missing employee value becomes 80
#
# MEDIAN IMPUTATION METHOD-2
# THE CASE
# In fin data some of the "Growth" cells are missing
fin[!complete.cases(fin$Growth),]  #not-complete "Growth" values in fin data (8)
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)  #med calculation
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)  #med calculation
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)  #med calculation
median(fin[fin$Industry=="Construction","Growth"], na.rm=T)
#
# MEDIAN IMPUTATION METHOD-2
# THE CASE
# In fin data some of the "Growth" cells are missing
fin[!complete.cases(fin$Growth),]  #not-complete "Growth" values in fin data (8)
View(fin)
View(fin)
# Growth values are given with % sign, so we need to get rid of it
fin$Growth <- gsub("%","",fin$Growth)
View(fin)
#
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)  #med calculation
median(fin[fin$Industry=="Construction","Growth"], na.rm=T)                       #assign the med
str(fin)
as.numeric(fin$Growth) -> fin$Growth
#
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)  #med calculation
median(fin[fin$Industry=="Construction","Growth"], na.rm=T)                       #assign the med
median(fin[fin$Industry=="Construction","Growth"], na.rm=T)                       #assign the med
#
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)  #med calculation
median(fin[fin$Industry=="Construction","Growth"], na.rm=T)                       #assign the med
#
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)  #med calculation
med_growth_constr
med_empl_finserv
med_growth_constr ->fin[is.na(fin$Growth) & fin$Industry=="Construction","Growth"]  #assign the med
fin[10,]
fin[8,]
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
med_exp_constr <- median(fin[fin$Industry=="Construction","Expenses"],na.rm=T)
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
str(fin)
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
View(fin)
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
View(fin)
fin$Expenses <- gsub(" Dollars","",fin$Expenses)
View(fin)
fin$Expenses <- as.numeric(fin$Expenses)
fin$Expenses <- as.numeric(fin$Expenses, na.rm=T)
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
View(fin)
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
View(fin)
# F4-REPLACING MISSING DATA:
########################################
# MEDIAN IMPUTATION METHOD-1
# EXPLANATION:  #Missing values can be filled with average/median of the relevant column
#Taking average/median not for all rows but only related rows is logical
# EXAMPLE
#
# THE DATA
setwd("/Users/ugur/Desktop/R/_data/r_advanced/")
fin <- read.csv("future_500.csv")
fin <- read.csv("future_500.csv",na.strings=c(""))  #to replace empty chars with NA
# THE CASE
# In fin data some of the "Employees" cells are missing
# Missing values can be filled with average/median of the relevant column
# Taking average/median not for all rows but only related rows is logical
#
fin[!complete.cases(fin$Employees),]  #not-complete "Employees" values in fin data (3,332)
#
# EXAMPLE1: Filling NA cells with Median in "Retail"
med_empl_retail <- median(fin[fin$Industry=="Retail","Employees"], na.rm=T)                     #med calculation
med_empl_retail -> fin[is.na(fin$Employees) & fin$Industry=="Retail","Employees"]               #assign the med
fin[3,] #check the missing employee value becomes 28
#
# EXAMPLE2: Filling NA cells with Median in Financial Services"
med_empl_finserv <- median(fin[fin$Industry=="Financial Services","Employees"], na.rm=T)        #med calculation
med_empl_finserv #80
med_empl_finserv -> fin[is.na(fin$Employees) & fin$Industry=="Financial Services","Employees"]  #assign the med
fin[332,] #check the missing employee value becomes 80
#
# MEDIAN IMPUTATION METHOD-2
# THE CASE
# In fin data some of the "Growth" cells are missing
fin[!complete.cases(fin$Growth),]  #not-complete "Growth" values in fin data (8)
View(fin)
# Growth values are given with % sign, so we need to get rid of it
fin$Growth <- gsub("%","",fin$Growth)
View(fin)
as.numeric(fin$Growth) -> fin$Growth
#
med_growth_constr <- median(fin[fin$Industry=="Construction","Growth"], na.rm=T)    #med calculation
med_growth_constr #10
med_growth_constr ->fin[is.na(fin$Growth) & fin$Industry=="Construction","Growth"]  #assign the med
fin[8,]
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
View(fin)
fin$Expenses <- gsub(" Dollars","",fin$Expenses)
str(fin)
fin$Expenses <- gsub(",","",fin$Expenses)
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
View(fin)
fin$Expenses <- as.numeric(fin$Expenses)
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
View(fin)
str(fin)
#
med_exp_constr <- median(fin[fin$Industry=="Construction","Expenses"],na.rm=T)
med_exp_constr
fin[is.na(fin$Expenses) & fin$Industry=="Construction","Expenses"]
med_exp_constr -> fin[is.na(fin$Expenses) & fin$Industry=="Construction","Expenses"]
fin[8,]
fin[c(8,44),]
# F4-REPLACING MISSING DATA:
########################################
# MEDIAN IMPUTATION METHOD-1
# EXPLANATION:  #Missing values can be filled with average/median of the relevant column
#Taking average/median not for all rows but only related rows is logical
# EXAMPLE
#
# THE DATA
setwd("/Users/ugur/Desktop/R/_data/r_advanced/")
fin <- read.csv("future_500.csv")
fin <- read.csv("future_500.csv",na.strings=c(""))  #to replace empty chars with NA
# THE CASE
# In fin data some of the "Employees" cells are missing
# Missing values can be filled with average/median of the relevant column
# Taking average/median not for all rows but only related rows is logical
#
fin[!complete.cases(fin$Employees),]  #not-complete "Employees" values in fin data (3,332)
#
# EXAMPLE1: Filling NA cells with Median in "Retail"
med_empl_retail <- median(fin[fin$Industry=="Retail","Employees"], na.rm=T)                     #med calculation
med_empl_retail -> fin[is.na(fin$Employees) & fin$Industry=="Retail","Employees"]               #assign the med
fin[3,] #check the missing employee value becomes 28
#
# EXAMPLE2: Filling NA cells with Median in Financial Services"
med_empl_finserv <- median(fin[fin$Industry=="Financial Services","Employees"], na.rm=T)        #med calculation
med_empl_finserv #80
med_empl_finserv -> fin[is.na(fin$Employees) & fin$Industry=="Financial Services","Employees"]  #assign the med
fin[332,] #check the missing employee value becomes 80
#
# MEDIAN IMPUTATION METHOD-2
# THE CASE
# In fin data some of the "Growth" cells are missing
fin[!complete.cases(fin$Growth),]  #not-complete "Growth" values in fin data (8)
View(fin)
# Growth values are given with % sign, so we need to get rid of it
fin$Growth <- gsub("%","",fin$Growth)
View(fin)
as.numeric(fin$Growth) -> fin$Growth
med_growth_constr #10
med_growth_constr ->fin[is.na(fin$Growth) & fin$Industry=="Construction","Growth"]  #assign the med
fin[8,]
#
# MEDIAN IMPUTATION METHOD-3
# THE CASE
# In fin data some of the "Expenses" cells are missing
# Data Editing
View(fin)
fin$Expenses <- gsub(" Dollars","",fin$Expenses)
fin$Expenses <- gsub(",","",fin$Expenses)
fin$Expenses <- as.numeric(fin$Expenses)
#
fin[is.na(fin$Profit),"Profit"]
med_exp_constr
med_exp_constr -> fin[is.na(fin$Expenses) & fin$Industry=="Construction","Expenses"]
fin[c(8,44),]
#
# Deriving Values
# Profit = Revenue - Expenses
fin[is.na(fin$Profit),"Profit"] <- fin[is.na(fin$Profit),"Revenue"] - fin[is.na(fin$Profit),"Expenses"]
#
# Deriving Values
# Profit = Revenue - Expenses
str(fin)
#
# Deriving Values
# Profit = Revenue - Expenses
fin$Profit <- as.numeric(fin$Profit)
str(fin)
fin[is.na(fin$Profit),"Profit"] <- fin[is.na(fin$Profit),"Revenue"] - fin[is.na(fin$Profit),"Expenses"]
fin[is.na(fin$Profit),"Profit"] <- (fin[is.na(fin$Profit),"Revenue"] - fin[is.na(fin$Profit),"Expenses"])
View(fin)
View(fin)
View(fin)
fin$Revenue <- gsub("\\$","",fin$Revenue)
View(fin)
fin$Revenue <- gsub(",","",fin$Revenue)
fin$Revenue <- as.numeric(fin$Revenue)
View(fin)
med_exp_constr -> fin[is.na(fin$Expenses) & fin$Industry=="Construction","Expenses"]
View(fin)
fin[is.na(fin$Profit),"Profit"] <- fin[is.na(fin$Profit),"Revenue"] - fin[is.na(fin$Profit),"Expenses"]
View(fin)
#
# Deriving Values for Expenses
# Expenses = Revenue - Profit
fin[is.na(fin$Expenses),"Expenses"] <- fin[is.na(fin$Expenses),"Revenue"] - fin[is.na(fin$Expenses),"Profit"]
View(fin)
fin[15,]
